@import 'weather-icons/css/weather-icons.min.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Field sizing für moderne Browser (Chrome 123+) */
  @supports (field-sizing: content) {
    textarea,
    select,
    input {
      field-sizing: content;
    }

    textarea {
      min-height: 3rem;
      max-height: 20rem;
      overflow: hidden;
      resize: vertical;
    }
  }

  /* Fallback für Browser ohne field-sizing (Safari, Firefox) */
  @supports not (field-sizing: content) {
    textarea {
      min-height: 3rem;
      resize: vertical;
    }
  }
}

/* Projekt-spezifische Component-Klassen */
@layer components {
  /* Card Container - Standard-Card für Content-Bereiche */
  .card-container {
    @apply bg-base-100 shadow-xl rounded-lg p-6;
  }

  .card-container-compact {
    @apply bg-base-100 shadow rounded-lg p-4;
  }

  /* Page Header - Seitentitel mit Beschreibung */
  .page-header {
    @apply mb-8;
  }

  .page-title {
    @apply text-3xl font-bold text-base-content flex items-center gap-3;
  }

  .page-description {
    @apply mt-2 text-base-content;
    opacity: 0.7;
  }

  /* Stats Cards - Gradient-Cards für Metriken */
  .stats-card-blue {
    @apply bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg p-6 shadow-lg;
  }

  .stats-card-green {
    @apply bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg p-6 shadow-lg;
  }

  .stats-card-orange {
    @apply bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg p-6 shadow-lg;
  }

  .stats-card-purple {
    @apply bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg p-6 shadow-lg;
  }

  .stats-card-yellow {
    @apply bg-gradient-to-r from-yellow-500 to-yellow-600 text-white rounded-lg p-6 shadow-lg;
  }

  /* Buttons - Action Buttons mit Icon-Support */
  .btn-action {
    @apply btn btn-primary gap-2;
  }

  .btn-action-ghost {
    @apply btn btn-ghost gap-2;
  }

  .btn-action-outline {
    @apply btn btn-outline gap-2;
  }

  /* Tables - Responsive Tabellen-Container */
  .table-container {
    @apply overflow-x-auto bg-base-100 shadow rounded-lg;
  }

  .table-striped {
    @apply table table-zebra w-full;
  }

  /* Mobile-Responsive Table → Cards Transformation */
  .table-responsive {
    @apply w-full;
  }

  @media (max-width: 767px) {
    .table-responsive thead {
      display: none;
    }

    .table-responsive tbody {
      display: block;
    }

    .table-responsive tbody tr {
      display: block;
      margin-bottom: 1rem;
      padding: 1rem;
      border: 1px solid hsl(var(--bc) / 0.2);
      border-radius: 0.5rem;
      background: hsl(var(--b1));
      box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
    }

    .table-responsive tbody tr:hover {
      background: hsl(var(--b2));
    }

    .table-responsive td {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0;
      border-bottom: 1px solid hsl(var(--bc) / 0.1);
      text-align: right;
    }

    .table-responsive td::before {
      content: attr(data-label);
      font-weight: 600;
      color: hsl(var(--bc) / 0.6);
      text-align: left;
      flex-shrink: 0;
      margin-right: 1rem;
    }

    .table-responsive td:last-child {
      border-bottom: none;
    }

    /* Action-Spalte ohne Label */
    .table-responsive td[data-label=""] {
      justify-content: center;
    }

    .table-responsive td[data-label=""]::before {
      display: none;
    }

    /* Summenzeile speziell stylen */
    .table-responsive .sum-row {
      background: hsl(var(--p) / 0.1);
      border-color: hsl(var(--p) / 0.3);
    }

    .table-responsive .sum-row td {
      font-weight: 600;
    }

    /* Details-Zeilen von Transformation ausschließen */
    .table-responsive .details-row {
      display: none;
      padding: 0;
      margin: 0;
      border: none;
      box-shadow: none;
    }

    .table-responsive .details-row:not(.hidden) {
      display: block;
    }

    .table-responsive .details-row td {
      display: block;
      border: none;
      padding: 0;
    }

    .table-responsive .details-row td::before {
      display: none;
    }
  }

  /* Icon + Text Combinations */
  .icon-text {
    @apply flex items-center gap-2;
  }

  .icon-label {
    @apply flex items-center gap-2 text-sm font-medium;
  }

  /* Grid Layouts */
  .grid-2col {
    @apply grid grid-cols-1 lg:grid-cols-2 gap-6;
  }

  .grid-4col {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6;
  }

  .grid-responsive {
    @apply grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6;
  }

  /* Section/Content Wrapper */
  .section-container {
    @apply px-4 sm:px-6 lg:px-8;
  }

  .content-wrapper {
    @apply container mx-auto px-4 py-6 max-w-7xl;
  }

  /* Loading & Empty States */
  .loading-state {
    @apply text-center py-12;
  }

  .empty-state {
    @apply text-center py-12 text-base-content;
    opacity: 0.7;
  }
}
